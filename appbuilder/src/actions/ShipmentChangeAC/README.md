# Shipment Change AC Runtime Action

This runtime action is triggered during the shipment changes in OMS. If any shipment is created or any change happened to shipment status OMS send event to this action. This adds comment to adobe commerce based on the shipment. 


## Prequisite Steps

  1. Order must be created in both Adobe commerce and OMS

- ## Request: 
  {
    "data": {
        "Shipment": {
            "OrderAvailableOnSystem": "Y",
            "ToAppointment": "2023-08-11",
            "ShipmentClosedFlag": "N",
            "ShipVia": " ",
            "CommercialValue": "0.00",
            "FromAddressKey": "20230531172903901558",
            "CarrierAccountNo": " ",
            "ShipmentType": " ",
            "OriginZone": " ",
            "ActualFreightCharge": "0.00",
            "CarrierType": "PARCEL",
            "Currency": "USD",
            "ShipMode": "PARCEL",
            "TotalVolumeUOM": "CIN",
            "DeliveryTS": "2023-08-11",
            "EnterpriseCode": "TenantA",
            "StationType": "",
            "Status": "1100",
            "CarrierServiceCode": "Next Day Air",
            "NextAlertTs": "1900-01-01T00:00:00+00:00",
            "TotalActualCharge": "0.00",
            "ITDate": "2023-08-11",
            "YFSTenantCode": "TenantA",
            "Instructions": {},
            "ShipmentLines": {
                "ShipmentLine": [{
                    "ReleaseNo": "1",
                    "UnitOfMeasure": "EACH",
                    "IsHazmat": "N",
                    "ItemDesc": "Item1",
                    "OverShipQuantity": "0.00",
                    "DocumentType": "0001",
                    "Quantity": "2.00",
                    "Instructions": {},
                    "OrderNo": "tna_ORD006",
                    "PrimeLineNo": "1",
                    "ActualQuantity": "2.00",
                    "ItemID": "Item1",
                    "Segment": " ",
                    "SegmentType": " ",
                    "ShipmentKey": "2023081109464092224",
                    "ShipmentTagSerials": {
                        "TotalNumberOfRecords": "0"
                    },
                    "ShipmentLineKey": "2023081109464092223",
                    "SubLineNo": "1",
                    "isHistory": "N",
                    "OrderHeaderKey": "2023081109414992192",
                    "ProductClass": " ",
                    "ShipmentLineNo": "1",
                    "OrderLineKey": "2023081109414992193",
                    "OrderReleaseKey": "2023081109431092217"
                }]
            },
            "ShipDate": "2023-08-11T09:43:10+00:00",
            "Code": " ",
            "StationId": "",
            "NumOfCartons": "1",
            "TotalWeight": "0.00",
            "ExpectedShipmentDate": "2023-08-11T09:43:10+00:00",
            "SellerOrganizationCode": "TenantA",
            "ShipmentContainerizedFlag": "02",
            "TotalVolume": "0.00",
            "DestinationZone": " ",
            "ToAddress": {
                "VerificationStatus": "",
                "Company": "",
                "OtherPhone": "",
                "UseCount": "0",
                "EMailID": "",
                "DayPhone": "",
                "JobTitle": "",
                "MobilePhone": "",
                "Department": "",
                "AlternateEmailID": "",
                "PersonID": "",
                "PreferredShipAddress": "",
                "PersonInfoKey": "2023081104440289033",
                "Beeper": "",
                "FirstName": "",
                "ZipCode": "99551",
                "Title": "",
                "City": "Plano",
                "MiddleName": "",
                "DayFaxNo": "",
                "HttpUrl": "",
                "AddressLine3": "",
                "AddressLine2": "",
                "AddressLine1": "",
                "Suffix": "",
                "AddressLine6": "",
                "AddressLine5": "",
                "State": "AK",
                "AddressLine4": "",
                "EveningFaxNo": "",
                "EveningPhone": "",
                "Country": "US",
                "ErrorTxt": "",
                "LastName": ""
            },
            "FromAppointment": "2023-08-11",
            "TotalWeightUOM": "LBS",
            "Containers": {
                "Container": [{
                    "DeliveryDay": " ",
                    "IsHazmat": "N",
                    "DimmedFlag": " ",
                    "TrackingNo": "T1",
                    "ContainerSeqNo": "0",
                    "ContainerLengthUOM": "IN",
                    "ExportLicenseNo": " ",
                    "ContainerScm": " ",
                    "ContainerWidthUOM": "IN",
                    "IsManifested": "N",
                    "ActualFreightCharge": "0.00",
                    "OversizedFlag": " ",
                    "ServiceType": " ",
                    "ShipMode": "PARCEL",
                    "Ucc128code": " ",
                    "CarrierLocationID": " ",
                    "AppliedWeight": "0.00",
                    "CarrierServiceCode": "Next Day Air",
                    "ContainerGrossWeightUOM": "LBS",
                    "ContainerNetWeight": "0.00",
                    "Instructions": {},
                    "HasOtherContainers": "N",
                    "ShipDate": "2023-08-11",
                    "CommitmentCode": " ",
                    "DiscountAmount": "0.00",
                    "ContainerWidth": "0.00",
                    "CustCarrierAccountNo": " ",
                    "ContainerHeightUOM": "IN",
                    "FormID": " ",
                    "DeliverBy": " ",
                    "ExportLicenseExpDate": "2023-08-11",
                    "MasterContainerNo": "0",
                    "ContainerLength": "0.00",
                    "AstraCode": " ",
                    "DeliveryCode": " ",
                    "AppliedWeightUOM": " ",
                    "ContainerNo": "A1002",
                    "SCAC": "UPSN",
                    "CarrierBillAccount": " ",
                    "ShipmentContainerKey": "2023081109464092225",
                    "CustomsValue": "0.00",
                    "ParentContainerNo": " ",
                    "ContainerDetails": {
                        "TotalNumberOfRecords": "1",
                        "ContainerDetail": [{
                            "ContainerDetailsKey": "2023081109464092226",
                            "ShipmentKey": "2023081109464092224",
                            "ShipmentTagSerials": {
                                "TotalNumberOfRecords": "0"
                            },
                            "ShipmentLineKey": "2023081109464092223",
                            "UnitOfMeasure": "EACH",
                            "Quantity": "1.00",
                            "ShipmentContainerKey": "2023081109464092225",
                            "ProductClass": " ",
                            "ItemID": "Item1"
                        }]
                    },
                    "DeclaredValue": "0.00",
                    "ShipToKey": " ",
                    "BarcodeDiscount": " ",
                    "ContainerGrossWeight": "0.00",
                    "ContainerHeight": "0.00",
                    "RoutingCode": " ",
                    "SpecialServicesSurcharge": "0.00",
                    "Zone": " ",
                    "ContainerType": " ",
                    "ContainerNetWeightUOM": "LBS",
                    "ShipmentKey": "2023081109464092224",
                    "CarriageValue": "0.00",
                    "BasicFreightCharge": "0.00",
                    "CarrierPaymentType": " ",
                    "FreightTerms": " "
                }]
            },
            "DeliveryCode": " ",
            "DownLoadCount": "0",
            "FromAddress": {
                "VerificationStatus": "",
                "Company": "",
                "OtherPhone": "",
                "UseCount": "0",
                "EMailID": "",
                "DayPhone": "",
                "JobTitle": "",
                "MobilePhone": "",
                "Department": "",
                "AlternateEmailID": "",
                "PersonID": "",
                "PreferredShipAddress": "",
                "PersonInfoKey": "20230531172903901558",
                "Beeper": "",
                "FirstName": "TNA",
                "ZipCode": "",
                "Title": "",
                "City": "florida",
                "MiddleName": "",
                "DayFaxNo": "",
                "HttpUrl": "",
                "AddressLine3": "",
                "AddressLine2": "",
                "AddressLine1": "",
                "Suffix": "",
                "AddressLine6": "",
                "AddressLine5": "",
                "State": "",
                "AddressLine4": "",
                "EveningFaxNo": "",
                "EveningPhone": "",
                "Country": "",
                "ErrorTxt": "",
                "LastName": ""
            },
            "PipelineKey": "SALES-SHIPMENT-10.0",
            "SCAC": "UPSN",
            "HazardousMaterialFlag": "N",
            "YFSTranEventID": "CREATE_SHIPMENT.ON_SUCCESS",
            "ShipmentCharges": {},
            "NumOfPallets": "0",
            "DocumentType": "0001",
            "ShipmentDeliverUpdatesDone": "N",
            "PackListType": " ",
            "HasOtherShipments": "N",
            "ShipmentNo": "AdobeShip1",
            "ShipmentConfirmUpdatesDone": "N",
            "ShipmentKey": "2023081109464092224",
            "StatusDate": "2023-08-11T09:46:40+00:00",
            "ToAddressKey": "2023081104440289033",
            "ExportTaxpayerID": " ",
            "ShipmentPlannedFlag": "N",
            "TotalEstimatedCharge": "0.00",
            "ExpectedDeliveryDate": "2023-08-11T09:43:10+00:00",
            "ShipNode": "tna_dc_1",
            "FreightTerms": " "
        }
    },
    "id": "4b5a60d3-2608-4ec8-9b68-a9d9a354b8d4",
    "source": "urn:uuid:db3aafe4-f79f-4e2c-b20d-503ec12ca903",
    "specversion": "1.0",
    "type": "ibm.sterling.adobe.shipment_change.v0",
    "datacontenttype": "application/json",
    "event_id": "f4ed0d8a-bd2d-497e-a206-5faabd90d616",
    "recipient_client_id": "e142407e73ef48f884aeb8e925c1e256"
}


- ## Response: 
   
  { "body": { "data": { "commentSaved": true }, "status": "SUCCESS" }, "statusCode": 200 }
